<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quests - StacksOrangeVault</title>
    <link rel="stylesheet" href="../styles/variables.css">
    <link rel="stylesheet" href="../styles/global.css">
    <style>
        .page-header {
            margin-top: 120px;
            margin-bottom: var(--space-64);
            text-align: center;
        }

        .page-header h1 {
            font-size: 48px;
            margin-bottom: var(--space-16);
        }

        .tabs-container {
            display: flex;
            justify-content: center;
            gap: var(--space-32);
            border-bottom: 1px solid rgba(224, 230, 242, 0.1);
            margin-bottom: var(--space-48);
        }

        .tab {
            padding: var(--space-16) 0;
            font-weight: 600;
            color: var(--color-text-secondary);
            position: relative;
            cursor: pointer;
            transition: var(--transition);
        }

        .tab.active {
            color: var(--color-primary-orange);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--color-primary-orange);
        }

        .quests-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: var(--space-32);
            margin-bottom: var(--space-64);
        }

        @media (max-width: 768px) {
            .page-header h1 {
                font-size: 32px;
            }

            .tabs-container {
                gap: var(--space-16);
            }

            .tab {
                font-size: 14px;
            }
        }
    </style>
</head>

<body>
    <div id="header-root"></div>

    <main class="container">
        <div class="page-header">
            <h1>Ecosystem <span class="text-orange">Quests</span></h1>
            <p style="color: var(--color-text-secondary);">Complete challenges, prove your on-chain skills, and earn
                non-transferable Soulbound Badges.</p>
        </div>

        <div class="tabs-container">
            <div class="tab active">ALL QUESTS</div>
            <div class="tab">ON-CHAIN</div>
            <div class="tab">COMMUNITY</div>
            <div class="tab">TRADING</div>
            <div class="tab">COMPLETED</div>
        </div>

        <div class="quests-grid" id="quests-grid">
            <!-- Quest cards will be injected here -->
        </div>
    </main>

    <script type="module" src="../main.js"></script>
    <script>
        // Load Header
        fetch('../components/Header.html')
            .then(res => res.text())
            .then(html => {
                document.getElementById('header-root').innerHTML = html;
            });

        // Mock Quest Data
        const quests = [
            {
                title: "The First Step",
                description: "Verify your wallet and join the Orange community on Discord to earn your bronze contributor badge.",
                image_url: "https://images.unsplash.com/photo-1620641788421-7a1c342ea42e?q=80&w=2874&auto=format&fit=crop",
                progress_percent: 60,
                progress_text: "3/5 Completed",
                action_label: "Continue Quest"
            },
            {
                title: "Token Pioneer",
                description: "Submit your first transaction to the Stacks network and interact with the Orange Token contract.",
                image_url: "https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2864&auto=format&fit=crop",
                progress_percent: 20,
                progress_text: "1/5 Completed",
                action_label: "Start Quest"
            },
            {
                title: "Liquidity Master",
                description: "Stake at least 5,000 ORANGE tokens for a period of 90 days to unlock the Silver Staker badge.",
                image_url: "https://images.unsplash.com/photo-1639762681057-4080219f8a0e?q=80&w=2832&auto=format&fit=crop",
                progress_percent: 0,
                progress_text: "0/1 Completed",
                action_label: "View Details"
            },
            {
                title: "Badge Collector",
                description: "Own 5 different Soulbound Badges to unlock the exclusive 'Orange Sentinel' tier.",
                image_url: "https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=2940&auto=format&fit=crop",
                progress_percent: 40,
                progress_text: "2/5 Badges",
                action_label: "Check Progress"
            }
        ];

        // Load Quest Card Component and Render
        fetch('../components/QuestCard.html')
            .then(res => res.text())
            .then(templateHtml => {
                const grid = document.getElementById('quests-grid');

                // Extract style from template
                const styleMatch = templateHtml.match(/<style>([\s\S]*?)<\/style>/);
                if (styleMatch) {
                    const style = document.createElement('style');
                    style.textContent = styleMatch[1];
                    document.head.appendChild(style);
                }

                // Clean template HTML (remove style tag)
                const cleanTemplate = templateHtml.replace(/<style>[\s\S]*?<\/style>/, '').trim();

                quests.forEach(quest => {
                    let html = cleanTemplate;
                    for (const key in quest) {
                        html = html.replace(new RegExp(`{${key}}`, 'g'), quest[key]);
                    }
                    grid.innerHTML += html;
                });
            });
    </script>
</body>

</html>